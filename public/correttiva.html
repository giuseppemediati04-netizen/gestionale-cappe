<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scheda Intervento Correttiva</title>
    <style>
        @media print {
            body { margin: 0; padding: 15mm; }
            .no-print { display: none !important; }
            .page-break { page-break-after: always; }
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.4;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 210mm;
            margin: 0 auto;
            background: white;
            padding: 20mm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header .subtitle {
            color: #666;
            font-size: 14px;
        }

        .section {
            margin-bottom: 25px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }

        .section-title {
            background: #667eea;
            color: white;
            padding: 8px 12px;
            margin: -15px -15px 15px -15px;
            border-radius: 4px 4px 0 0;
            font-size: 16px;
            font-weight: bold;
        }

        .field-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .field-group.full {
            grid-template-columns: 1fr;
        }

        .field {
            margin-bottom: 10px;
        }

        .field label {
            display: block;
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
            font-size: 13px;
        }

        .field input[type="text"],
        .field input[type="date"],
        .field input[type="time"],
        .field input[type="number"],
        .field textarea,
        .field select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            font-family: inherit;
        }

        .field textarea {
            min-height: 80px;
            resize: vertical;
        }

        .field.readonly input,
        .field.readonly textarea {
            background: #f9f9f9;
            color: #333;
            font-weight: 500;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 6px;
            width: 16px;
            height: 16px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        table th,
        table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 12px;
        }

        table th {
            background: #f5f5f5;
            font-weight: bold;
        }

        table input {
            width: 100%;
            border: none;
            padding: 4px;
            font-size: 12px;
        }

        .signature-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .signature-box {
            text-align: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .signature-box .label {
            font-weight: bold;
            margin-bottom: 10px;
            color: #667eea;
        }

        .signature-box .line {
            border-top: 1px solid #333;
            margin: 40px 10px 5px 10px;
        }

        .signature-box .name {
            font-size: 11px;
            color: #666;
        }

        .toolbar {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-print {
            background: #28a745;
            color: white;
        }

        .btn-print:hover {
            background: #218838;
        }

        .btn-close {
            background: #6c757d;
            color: white;
        }

        .btn-close:hover {
            background: #5a6268;
        }

        .info-text {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #1976D2;
        }
    </style>
</head>
<body>
    <div class="toolbar no-print">
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è Stampa/Salva PDF</button>
        <button class="btn btn-close" onclick="window.close()">‚úï Chiudi</button>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üîß RAPPORTO INTERVENTO MANUTENZIONE CORRETTIVA</h1>
            <div class="subtitle">Sistema di Gestione Cappe Aspirazione</div>
        </div>

        <div class="info-text no-print">
            üìã I campi in grigio sono precompilati. Compila i campi bianchi e stampa/salva come PDF.
        </div>

        <!-- Intestazione Rapporto -->
        <div class="section">
            <div class="field-group">
                <div class="field">
                    <label>N¬∞ Rapporto:</label>
                    <input type="text" id="numeroRapporto" placeholder="Es: CORR-2025-001">
                </div>
                <div class="field">
                    <label>Data Emissione:</label>
                    <input type="date" id="dataEmissione">
                </div>
            </div>
        </div>

        <!-- Anagrafica Apparecchiatura -->
        <div class="section">
            <div class="section-title">üìã ANAGRAFICA APPARECCHIATURA</div>
            <div class="field-group">
                <div class="field readonly">
                    <label>Inventario:</label>
                    <input type="text" id="inventario" readonly>
                </div>
                <div class="field readonly">
                    <label>Tipologia:</label>
                    <input type="text" id="tipologia" readonly>
                </div>
            </div>
            <div class="field-group">
                <div class="field readonly">
                    <label>Matricola:</label>
                    <input type="text" id="matricola" readonly>
                </div>
                <div class="field readonly">
                    <label>Produttore:</label>
                    <input type="text" id="produttore" readonly>
                </div>
            </div>
            <div class="field-group">
                <div class="field readonly">
                    <label>Modello:</label>
                    <input type="text" id="modello" readonly>
                </div>
                <div class="field readonly">
                    <label>Sede:</label>
                    <input type="text" id="sede" readonly>
                </div>
            </div>
            <div class="field-group">
                <div class="field readonly">
                    <label>Reparto:</label>
                    <input type="text" id="reparto" readonly>
                </div>
                <div class="field readonly">
                    <label>Locale:</label>
                    <input type="text" id="locale" readonly>
                </div>
            </div>
        </div>

        <!-- Richiesta Intervento -->
        <div class="section">
            <div class="section-title">üî¥ RICHIESTA INTERVENTO</div>
            <div class="field-group">
                <div class="field">
                    <label>N¬∞ Richiesta:</label>
                    <input type="text" id="numeroRichiesta">
                </div>
                <div class="field">
                    <label>Data Richiesta:</label>
                    <input type="date" id="dataRichiesta">
                </div>
            </div>
            <div class="field-group">
                <div class="field">
                    <label>Ora Richiesta:</label>
                    <input type="time" id="oraRichiesta">
                </div>
                <div class="field">
                    <label>Richiedente:</label>
                    <input type="text" id="richiedente">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Telefono:</label>
                    <input type="text" id="telefono">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Descrizione Anomalia:</label>
                    <textarea id="descrizioneAnomalia" placeholder="Descrivere in dettaglio il problema riscontrato..."></textarea>
                </div>
            </div>
            <div class="field">
                <label>Impatto Operativo:</label>
                <div class="checkbox-group">
                    <label><input type="radio" name="impatto" value="bloccante"> Cappa ferma - Attivit√† bloccata</label>
                    <label><input type="radio" name="impatto" value="parziale"> Cappa utilizzabile parzialmente</label>
                    <label><input type="radio" name="impatto" value="lieve"> Cappa utilizzabile - Problema lieve</label>
                </div>
            </div>
        </div>

        <!-- Diagnosi -->
        <div class="section">
            <div class="section-title">üîç DIAGNOSI</div>
            <div class="field-group">
                <div class="field">
                    <label>Data Sopralluogo:</label>
                    <input type="date" id="dataSopralluogo">
                </div>
                <div class="field">
                    <label>Ora:</label>
                    <input type="time" id="oraSopralluogo">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Tecnico Diagnostico:</label>
                    <input type="text" id="tecnicoDiagnostico">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Causa Guasto:</label>
                    <textarea id="causaGuasto" placeholder="Descrizione dettagliata della causa del guasto..."></textarea>
                </div>
            </div>
            <div class="field">
                <label>Componenti Danneggiati:</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="componente" value="motore"> Motore/Ventilatore</label>
                    <label><input type="checkbox" name="componente" value="filtri"> Filtri (HEPA/Carboni)</label>
                    <label><input type="checkbox" name="componente" value="uv"> Lampada UV</label>
                    <label><input type="checkbox" name="componente" value="bianca"> Lampada Bianca</label>
                    <label><input type="checkbox" name="componente" value="elettrico"> Quadro Elettrico</label>
                    <label><input type="checkbox" name="componente" value="sensori"> Sensori</label>
                    <label><input type="checkbox" name="componente" value="vetri"> Vetri/Pannelli</label>
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Altro Componente:</label>
                    <input type="text" id="altroComponente">
                </div>
            </div>
            <div class="field">
                <label>Analisi Causa Radice:</label>
                <div class="checkbox-group">
                    <label><input type="radio" name="causa" value="usura"> Usura normale</label>
                    <label><input type="radio" name="causa" value="uso"> Uso improprio</label>
                    <label><input type="radio" name="causa" value="manutenzione"> Manutenzione non eseguita</label>
                    <label><input type="radio" name="causa" value="difetto"> Difetto componente</label>
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Altra Causa:</label>
                    <input type="text" id="altraCausa">
                </div>
            </div>
        </div>

        <div class="page-break"></div>

        <!-- Intervento Correttivo -->
        <div class="section">
            <div class="section-title">üîß INTERVENTO CORRETTIVO</div>
            <div class="field-group">
                <div class="field">
                    <label>Data Inizio:</label>
                    <input type="date" id="dataInizio">
                </div>
                <div class="field">
                    <label>Ora Inizio:</label>
                    <input type="time" id="oraInizio">
                </div>
            </div>
            <div class="field-group">
                <div class="field">
                    <label>Data Fine:</label>
                    <input type="date" id="dataFine">
                </div>
                <div class="field">
                    <label>Ora Fine:</label>
                    <input type="time" id="oraFine">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Durata Totale (ore):</label>
                    <input type="number" id="durataTotale" step="0.5">
                </div>
            </div>
            <div class="field-group">
                <div class="field">
                    <label>Tecnico 1:</label>
                    <input type="text" id="tecnico1">
                </div>
                <div class="field">
                    <label>Tecnico 2:</label>
                    <input type="text" id="tecnico2">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Supervisore:</label>
                    <input type="text" id="supervisore">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Attivit√† Eseguite:</label>
                    <textarea id="attivitaEseguite" placeholder="1. ...&#10;2. ...&#10;3. ..." style="min-height: 120px;"></textarea>
                </div>
            </div>
            
            <label style="font-weight: bold; display: block; margin: 15px 0 10px 0;">Ricambi e Materiali:</label>
            <table>
                <thead>
                    <tr>
                        <th style="width: 35%;">Descrizione</th>
                        <th style="width: 20%;">Codice</th>
                        <th style="width: 10%;">Q.t√†</th>
                        <th style="width: 20%;">Fornitore</th>
                        <th style="width: 15%;">Costo ‚Ç¨</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="number"></td><td><input type="text"></td><td><input type="number" step="0.01"></td></tr>
                    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="number"></td><td><input type="text"></td><td><input type="number" step="0.01"></td></tr>
                    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="number"></td><td><input type="text"></td><td><input type="number" step="0.01"></td></tr>
                    <tr><td><input type="text"></td><td><input type="text"></td><td><input type="number"></td><td><input type="text"></td><td><input type="number" step="0.01"></td></tr>
                </tbody>
            </table>
            <div class="field-group full" style="margin-top: 10px;">
                <div class="field">
                    <label>Totale Costi Materiali (‚Ç¨):</label>
                    <input type="number" id="totaleMateriali" step="0.01">
                </div>
            </div>
        </div>

        <!-- Verifiche Post-Intervento -->
        <div class="section">
            <div class="section-title">‚úÖ VERIFICHE POST-INTERVENTO</div>
            <div class="field-group full">
                <div class="field">
                    <label>Data Test:</label>
                    <input type="date" id="dataTest">
                </div>
            </div>
            <div class="field">
                <label>Test Funzionali Eseguiti:</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="test" value="flusso"> Flusso laminare verificato</label>
                    <label><input type="checkbox" name="test" value="pressione"> Pressione differenziale OK</label>
                    <label><input type="checkbox" name="test" value="illuminazione"> Illuminazione funzionante</label>
                    <label><input type="checkbox" name="test" value="allarmi"> Allarmi funzionanti</label>
                    <label><input type="checkbox" name="test" value="sensori"> Sensori tarati</label>
                    <label><input type="checkbox" name="test" value="filtri"> Filtri installati correttamente</label>
                    <label><input type="checkbox" name="test" value="tenuta"> Tenuta verificata</label>
                </div>
            </div>
            <div class="field-group">
                <div class="field">
                    <label>Velocit√† aria (m/s):</label>
                    <input type="number" id="velocitaAria" step="0.01" placeholder="Range: 0.3-0.5">
                </div>
                <div class="field">
                    <label>Pressione (Pa):</label>
                    <input type="number" id="pressione" step="1" placeholder="Min: 10 Pa">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Illuminamento (lux):</label>
                    <input type="number" id="illuminamento" step="1" placeholder="Min: 800 lux">
                </div>
            </div>
        </div>

        <!-- Conclusioni -->
        <div class="section">
            <div class="section-title">üìù CONCLUSIONI</div>
            <div class="field">
                <label>Stato Finale:</label>
                <div class="checkbox-group">
                    <label><input type="radio" name="stato" value="ok"> ‚úÖ Cappa ripristinata e rilasciata per l'uso</label>
                    <label><input type="radio" name="stato" value="attesa"> ‚ö†Ô∏è In attesa di ricambi</label>
                    <label><input type="radio" name="stato" value="specialistico"> üîß Necessita intervento specialistico</label>
                    <label><input type="radio" name="stato" value="fuori"> ‚ùå Fuori servizio - Sostituzione necessaria</label>
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Codice Ricambio in Attesa:</label>
                    <input type="text" id="codiceRicambio">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Note Tecniche:</label>
                    <textarea id="noteTecniche"></textarea>
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Raccomandazioni:</label>
                    <textarea id="raccomandazioni"></textarea>
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label>Prossima Manutenzione Preventiva:</label>
                    <input type="date" id="prossimaManutenzione">
                </div>
            </div>
        </div>

        <!-- Costi -->
        <div class="section">
            <div class="section-title">üí∞ COSTI</div>
            <div class="field-group">
                <div class="field">
                    <label>Costo Orario (‚Ç¨/h):</label>
                    <input type="number" id="costoOrario" step="0.01">
                </div>
                <div class="field">
                    <label>Ore Totali:</label>
                    <input type="number" id="oreTotali" step="0.5">
                </div>
            </div>
            <div class="field-group">
                <div class="field">
                    <label>Manodopera (‚Ç¨):</label>
                    <input type="number" id="costoManodopera" step="0.01">
                </div>
                <div class="field">
                    <label>Trasferta (‚Ç¨):</label>
                    <input type="number" id="costoTrasferta" step="0.01">
                </div>
            </div>
            <div class="field-group full">
                <div class="field">
                    <label><strong>TOTALE INTERVENTO (‚Ç¨):</strong></label>
                    <input type="number" id="costoTotale" step="0.01" style="font-weight: bold; font-size: 16px;">
                </div>
            </div>
        </div>

        <!-- Firme -->
        <div class="signature-row">
            <div class="signature-box">
                <div class="label">Tecnico Esecutore</div>
                <input type="text" placeholder="Nome" style="width: 100%; margin-bottom: 5px;">
                <div class="line"></div>
                <div class="name">Firma e Data</div>
            </div>
            <div class="signature-box">
                <div class="label">Supervisore Tecnico</div>
                <input type="text" placeholder="Nome" style="width: 100%; margin-bottom: 5px;">
                <div class="line"></div>
                <div class="name">Firma e Data</div>
            </div>
            <div class="signature-box">
                <div class="label">Responsabile Reparto</div>
                <input type="text" placeholder="Nome" style="width: 100%; margin-bottom: 5px;">
                <div class="line"></div>
                <div class="name">Firma e Data</div>
            </div>
        </div>
    </div>

    <script src="correttiva.js"></script>
</body>
</html>
